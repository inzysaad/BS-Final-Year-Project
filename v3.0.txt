import sys
import time
import RPi.GPIO as GPIO


leftmotorforward=10
leftmotorreverse=8
rightmotorforward=11
rightmotorreverse=13
leftsensor=15
rightsensor=16
# servo=
sleeptime=1

#GPIO.setwarnings(False)
GPIO.setmode(GPIO.BOARD)
GPIO.setup(leftmotorforward, GPIO.OUT, initial=GPIO.LOW)
GPIO.setup(rightmotorforward, GPIO.OUT, initial=GPIO.LOW)
GPIO.setup(leftmotorreverse, GPIO.OUT, initial=GPIO.LOW)
GPIO.setup(rightmotorreverse, GPIO.OUT, initial=GPIO.LOW)
GPIO.setup(leftsensor, GPIO.IN)
GPIO.setup(rightsensor, GPIO.IN)

ir1=GPIO.input(leftsensor)
ir2=GPIO.input(rightsensor)

def left(x):                         
    print ("LEFT")
    GPIO.output(leftmotorforward, GPIO.LOW)                   #-----> turning left 
    GPIO.output(leftmotorreverse, GPIO.HIGH) 
    GPIO.output(rightmotorforward, GPIO.HIGH) 
    GPIO.output(rightmotorreverse, GPIO.LOW)
    time.sleep(x)

def right(x): 
    print ("RIGHT")
    GPIO.output(leftmotorforward, GPIO.HIGH)  
    GPIO.output(leftmotorreverse, GPIO.LOW)                  #-----> turning right   
    GPIO.output(rightmotorforward, GPIO.LOW) 
    GPIO.output(rightmotorreverse, GPIO.HIGH)
    time.sleep(x)

def forward(): 
    print ("FORWARD")
    GPIO.output(leftmotorforward, GPIO.HIGH) 
    GPIO.output(leftmotorreverse, GPIO.LOW)                   #-----> move forward 
    GPIO.output(rightmotorforward, GPIO.HIGH) 
    GPIO.output(rightmotorreverse, GPIO.LOW)
    #time.sleep(x)

def reverse(x): 
    print ("BACKWARDS")
    GPIO.output(leftmotorforward, GPIO.LOW) 
    GPIO.output(leftmotorreverse, GPIO.HIGH) 
    GPIO.output(rightmotorforward, GPIO.LOW)                   #-----> move backwards 
    GPIO.output(rightmotorreverse, GPIO.HIGH)
    time.sleep(x)

def stop(): 
    print ("STOP")
    GPIO.output(leftmotorforward, GPIO.LOW) 
    GPIO.output(leftmotorreverse, GPIO.LOW)                   #-----> stop 
    GPIO.output(rightmotorforward, GPIO.LOW) 
    GPIO.output(rightmotorreverse, GPIO.LOW)
    
while(1):
    if(GPIO.input(leftsensor)==0 or GPIO.input(rightsensor)==0):
        stop()
    else:
        forward()
        #forward(2)
        #left(2)
        #right(2)
        #reverse(2)

print ("Initiating cleanup protocol...")
GPIO.cleanup()
